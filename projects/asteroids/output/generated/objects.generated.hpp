/*
 * File generated by build.exe--do not edit!
 * Refer to: source/build/objects.cpp (objects::GenerateHeader)
 *
 * This header should only be included in source/manta/objects.hpp
 */
#pragma once

// OBJECT SYSTEM INCLUDES
#include <vendor/new.hpp>
#include <manta/objects.hpp>
#include <types.hpp>

// HEADER_INCLUDES
// ...

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

namespace iobjects
{
	extern byte *OBJECT_CTOR_MANUAL_BUFFER;
	extern byte *OBJECT_CTOR_DEFAULT_BUFFER;
	extern u32 OBJECT_CTOR_BUFFER_SIZE;
	extern u32 OBJECT_CTOR_BUFFER_OFFSET[];

	extern const u16 OBJECT_TYPE_BUCKET_CAPACITY[];
	extern const i32 OBJECT_TYPE_MAX_COUNT[];
	extern const u16 OBJECT_TYPE_INHERITANCE_DEPTH[];
	extern const u16 OBJECT_TYPE_SIZE[];
#if COMPILE_DEBUG
	extern const char *OBJECT_TYPE_NAME[];
#endif

	template <int N, typename... Args> struct object_constructor;

	extern bool init();
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

enum
{
	BASE_OBJECT,
	obj_asteroid,
	obj_projectile,
	obj_rocket,
	OBJECT_TYPE_COUNT,
};

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

__INTERNAL_OBJECT_DEFINITION_BEGIN()
class BASE_OBJECT_t
{
public:
	BASE_OBJECT_t() = default;

	// PUBLIC DATA
	Object id;

	// EVENTS
	virtual void event_create();
	virtual void event_destroy();
private:
};
__INTERNAL_OBJECT_DEFINITION_END()

template <> struct ObjectHandle<BASE_OBJECT>
{
	iobjects::BASE_OBJECT_t *data = nullptr;
	iobjects::BASE_OBJECT_t *operator->() const { Assert( data != nullptr ); return data; }
	explicit operator bool() const { return data != nullptr; }
	ObjectHandle( void *object ) { data = reinterpret_cast<iobjects::BASE_OBJECT_t *>( object ); }
};


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

__INTERNAL_OBJECT_DEFINITION_BEGIN()
class obj_asteroid_t : public BASE_OBJECT_t
{
public:
	obj_asteroid_t() = default;
	obj_asteroid_t( const float _size );
	obj_asteroid_t( const float _x, const float _y, const float _direction, const float _speed, const float _size );

	// PUBLIC DATA
	float x = 0.0f;
	float y = 0.0f;
	float speed = 0.0f;
	float direction = 0.0f;
	float rotation = 0.0f;
	float size = 0.0f;
	float health = 0.0f;
	const float radius = 16.0f;

	// EVENTS
	virtual void event_create();
	virtual void event_step( const Delta delta );
	virtual void event_draw( const Delta delta );
private:
	// PRIVATE DATA
	const float border = 256.0f;

};
__INTERNAL_OBJECT_DEFINITION_END()

template <typename... Args> struct iobjects::object_constructor<obj_asteroid, Args...>
{
	static void construct( Args... args )
	{
		new ( iobjects::OBJECT_CTOR_MANUAL_BUFFER + iobjects::OBJECT_CTOR_BUFFER_OFFSET[obj_asteroid] ) iobjects::obj_asteroid_t( args... );
	}
};

template <> struct ObjectHandle<obj_asteroid>
{
	iobjects::obj_asteroid_t *data = nullptr;
	iobjects::obj_asteroid_t *operator->() const { Assert( data != nullptr ); return data; }
	explicit operator bool() const { return data != nullptr; }
	ObjectHandle( void *object ) { data = reinterpret_cast<iobjects::obj_asteroid_t *>( object ); }
};


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

__INTERNAL_OBJECT_DEFINITION_BEGIN()
class obj_projectile_t : public BASE_OBJECT_t
{
public:
	obj_projectile_t() = default;

	// PUBLIC DATA
	float x;
	float y;
	float speed;
	float direction = 0.0f;

	// EVENTS
	virtual void event_create();
	virtual void event_step( const Delta delta );
	virtual void event_draw( const Delta delta );
private:
};
__INTERNAL_OBJECT_DEFINITION_END()

template <> struct ObjectHandle<obj_projectile>
{
	iobjects::obj_projectile_t *data = nullptr;
	iobjects::obj_projectile_t *operator->() const { Assert( data != nullptr ); return data; }
	explicit operator bool() const { return data != nullptr; }
	ObjectHandle( void *object ) { data = reinterpret_cast<iobjects::obj_projectile_t *>( object ); }
};


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

__INTERNAL_OBJECT_DEFINITION_BEGIN()
class obj_rocket_t : public BASE_OBJECT_t
{
public:
	obj_rocket_t() = default;

	// PUBLIC DATA
	float x = 0.0f;
	float y = 0.0f;
	float direction = 0.0f;
	float speed = 0.0f;
	float shootTimer = 1.0f;
	bool shootSide = false;

	// EVENTS
	virtual void event_create();
	virtual void event_step( const Delta delta );
	virtual void event_draw( const Delta delta );
private:
};
__INTERNAL_OBJECT_DEFINITION_END()

template <> struct ObjectHandle<obj_rocket>
{
	iobjects::obj_rocket_t *data = nullptr;
	iobjects::obj_rocket_t *operator->() const { Assert( data != nullptr ); return data; }
	explicit operator bool() const { return data != nullptr; }
	ObjectHandle( void *object ) { data = reinterpret_cast<iobjects::obj_rocket_t *>( object ); }
};


